digraph G {
fontname = "Bitstream Vera Sans"
fontsize = 8

node [
fontname = "Bitstream Vera Sans"
fontsize = 8
shape = "record"
]

APacket [
label = "{\
\<abstract\> - APacket||\
+ header : PacketHeader\l\
+ data : AData\l\
}"
]

AData [
label = "{\
\<abstract\> - AData||\
}"
]

PacketHeader [
label = "{\
PacketHeader||\
+ code : PacketCode\l\
+ time : Timestamp\l\
+ dataSize : unsigned int\l\
}"
]

DataLogin [
label = "{\
DataLogin||\
+ login : char[15]\l\
}"
]

DataColor [
label = "{\
DataColor||\
+ color : colorCode\l\
}"
]

DataCreateParty [
label = "{\
DataCreateParty||\
+ nbPlayersMin : unsigned int\l\
+ nbPlayerMax : unsigned int\l\
}"
]

DataMap [
label = "{\
DataMap||\
+ mapName : char[15]\l\
}"
]

DataReady [
label = "{\
DataReady||\
+ ready : bool\l\
}"
]

DataAction [
label = "{\
DataAction||\
+ id : unsigned int\l\
+ dir : DirectionCode\l\
}"
]

DataLoginId [
label = "{\
DataLoginId||\
+ login : char[15]\l\
+ id : unsigned int\l\
}"
]

DataLoginColor [
label = "{\
DataLoginColor||\
+ login : char[15]\l\
+ color : ColorCode\l\
}"
]

DataSpawn [
label = "{\
DataSpawn||\
+ id : unsigned int\l\
+ type : EntityType\l\
+ skinType : SkinType\l\
+ bulletType : BulletType\l\
+ x : unsigned int\l\
+ y : unsigned int\l\
+ frameNum : unsigned int\l\
}"
]

DataEmpty [
label = "{\
DataEmpty\
}"
]

DataMove [
label = "{\
DataMove||\
+ id : unsigned int\l\
+ x : unsigned int\l\
+ y : unsigned int\l\
}"
]

DataId [
label = "{\
DataId||\
+ id : unsigned int\l\
}"

]

DataFight [
label = "{\
DataFight||\
+ id : unsigned int\l\
+ dir : DirectionCode\l\
}"

]

DataBullet [
label = "{\
DataBullet||\
+ bullet : BulletType\l\
}"

]

DataMapDesc [
label = "{\
DataMapDesc||\
+ frameNum : unsigned int\l\
+ ceilType : GroundType\l\
+ ceilHeight : unsigned int\l\
+ floorType : GroundType\l\
+ floorHeight : unsigned int\l\
}"
]

EnumPacketCodes [
label = "{\
\<Enum\> - PacketCodes|\
## C-\>S : General communication TCP\l\
Login\l\
CreateParty\l\
addMap\l\
validParty\l\
join\l\
colorChange\l\
ready\l\
start\l\
stop\l\
quit\l\l\
## C-\>S : General communication UDP\l\
move\l\
fight\l\l\
## S-\>C : General communication TCP\l\
loginOK\l\
createOK\l\
sendMaps\l\
sendMapsEnd\l\
addMapOK\l\
validPartyOK\l\
joinOK\l\
joinParty\l\
leftParty\l\
playerColorChange\l\
playerReady\l\
playerNotReady\l\
partyStarting\l\
sendMapDesc\l\
sendMapDescEnd\l\
stop\l\l\
## S-\>C : Error codes TCP\l\
loginAlreadyExists\l\
badLoginFormat\l\
loginKO\l\
createKO\l\
maxPlayerTooHigh\l\
unknownMap\l\
validPartyKO\l\l\
## S-\>C : Game communication UDP\l\
spawn\l\
move\l\
fight\l\
die\l\
gainHP\l\
looseHP\l\
buletType\l\
}"
]

edge [
fontname = "Bitstream Vera Sans"
fontsize = 8
]

// Composition
PacketHeader -> APacket [arrowhead = "diamond" style = "solid"]
AData -> APacket [arrowhead = "diamond" style = "solid"]

// Heritage
DataMapDesc -> AData [arrowhead = "onormal" style = "solid"]
DataLogin -> AData [arrowhead = "onormal" style = "solid"]
DataCreateParty -> AData [arrowhead = "onormal" style = "solid"]
DataMap -> AData [arrowhead = "onormal" style = "solid"]
DataEmpty -> AData [arrowhead = "onormal" style = "solid"]
DataReady -> AData [arrowhead = "onormal" style = "solid"]
DataAction -> AData [arrowhead = "onormal" style = "solid"]
DataColor -> AData [arrowhead = "onormal" style = "solid"]
DataLoginId -> AData [arrowhead = "onormal" style = "solid"]
DataLoginColor -> AData [arrowhead = "onormal" style = "solid"]
DataSpawn -> AData [arrowhead = "onormal" style = "solid"]
DataMove -> AData [arrowhead = "onormal" style = "solid"]
DataId -> AData [arrowhead = "onormal" style = "solid"]
DataFight -> AData [arrowhead = "onormal" style = "solid"]
DataBullet -> AData [arrowhead = "onormal" style = "solid"]

}
